{% load static %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <title>Profile - {{user_profile.user.username}}</title>
    <link rel="icon" href="images/fav.png" type="image/png" sizes="16x16">
    <link rel="stylesheet" href="{% static 'css/main.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <link rel="stylesheet" href="{% static 'css/color.css' %}">
    <link rel="stylesheet" href="{% static 'css/responsive.css' %}">
    
    <style>
        .post-item {
            position: relative;
            overflow: hidden;
        }
        
        .delete-post-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #ef4444;
            color: white;
            border: none;
            border-radius: 50%;
            width: 36px;
            height: 36px;
            cursor: pointer;
            font-size: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 10;
        }
        
        .post-item:hover .delete-post-btn {
            opacity: 1;
        }
        
        .delete-post-btn:hover {
            background-color: #dc2626;
            transform: scale(1.1);
        }
        
        .delete-post-form {
            margin: 0;
            padding: 0;
        }
    </style>
</head>

<body>
    <div class="theme-layout"></div>
    
    <section>
        <div class="feature-photo">
            <figure><img src="{% static 'images/resources/timeline-1.jpg' %}" alt=""></figure>
            
            <form action="/follow" method="POST">
                {% csrf_token %}
                <div class="add-btn">
                    <span style="color: white; font-size: 27px; margin-right: 520px;">
                        <b><u><a href="/">Home</a></u></b>
                    </span>

                    {% if user_post_length == 1 %}
                        <span style="color: white; font-size: 27px;"><b>{{user_post_length}} Post</b></span>
                    {% else %}
                        <span style="color: white; font-size: 27px;"><b>{{user_post_length}} Posts</b></span>
                    {% endif %}

                    {% if user_followers == 0 or user_followers == 1 %}
                        <span style="color: white; font-size: 27px;"><b>{{user_followers}} follower</b></span>
                    {% else %}
                        <span style="color: white; font-size: 27px;"><b>{{user_followers}} followers</b></span>
                    {% endif %}
                    
                    <span style="color: white; font-size: 27px;"><b>{{user_following}} following</b></span>

                    <input type="hidden" value="{{user.username}}" name="follower" />
                    <input type="hidden" value="{{user_object.username}}" name="user" />
                    
                    {% if user_object.username == user.username %}
                        <a href="/settings" data-ripple="">Edit profile</a>
                    {% else %}
                        <a data-ripple="">
                            <button type='submit' style="background-color: #ffc0cb; border: #ffc0cb;">{{button_text}}</button>
                        </a>
                    {% endif %}
                </div>
            </form>

            <div class="container-fluid">
                <div class="row merged">
                    <div class="col-lg-2 col-sm-3">
                        <div class="user-avatar">
                            <figure>
                                <img src="{{user_profile.profileimg.url}}" style="height: 250px; width: 100%;" alt="">
                            </figure>
                        </div>
                    </div>
                    
                    <div class="col-lg-10 col-sm-9">
                        <div class="timeline-info">
                            <ul>
                                <li class="admin-name">
                                    <h5 style="color: black;white-space: nowrap; width: 110px; font-size: 27px;">
                                        <b>@{{user_profile.user.username}}</b>
                                    </h5>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section>
        <div class="bio">
            {{user_profile.bio}}
        </div>
    </section>
    
    <section>
        <div class="gap gray-bg">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-lg-12">
                        <div class="row" id="page-contents">
                            <div class="col-lg-3"></div>

                            <div class="col-lg-6">
                                <div class="central-meta">
                                    <ul class="photos">
                                        {% for post in user_posts %}
                                        <li class="post-item">
                                            <a class="strip" href="{{post.image.url}}" title="" data-strip-group="mygroup" data-strip-group-options="loop: false">
                                                <img src="{{post.image.url}}" style="height: 250px; width: 300px;" alt="">
                                            </a>
                                            
                                            {% if post.user == user.username %}
                                            <form method="POST" action="{% url 'delete_post' post.id %}" onsubmit="return confirm('Are you sure you want to delete this post?');" class="delete-post-form">
                                                {% csrf_token %}
                                                <button type="submit" class="delete-post-btn">
                                                    <i class="fa fa-trash"></i>
                                                </button>
                                            </form>
                                            {% endif %}
                                        </li>
                                        {% endfor %}
                                    </ul>
                                </div>
                            </div>

                            <div class="col-lg-3"></div>
                        </div>  
                    </div>
                </div>
            </div>
        </div>  
    </section>
    <script src="{% static 'js/main.min.js' %}"></script>
    <script src="{% static 'js/script.js' %}"></script>
</body>   
</html>